
From your Client VM log into the OpenShift Cluster 1 (use https://{cluster1_master} as `<CLUSTER_URL>`).



In the dev project create the following Tasks
* S2I NodeJS:
+
[source,sh]
----
oc create -f https://raw.githubusercontent.com/openshift/pipelines-catalog/master/s2i-nodejs/s2i-nodejs-task.yaml
----

* OpenShift CLI:
+
[source,sh]
----
oc create -f https://raw.githubusercontent.com/tektoncd/catalog/master/openshift-client/openshift-client-task.yaml
----

* Skopeo
+
[source,sh]
----
oc create -f skopeo-task/skopeo-task.yaml
----

Create the Credentials for Quay (create robot account and get token)
+
[source,sh]
----
oc create -f pipeline_resources/quay_secret.yaml
----

Add the credentials (secret) to the pipeline service account (maybe make a CRD quay_service_account that the operator will create with privileged permissions):
+
[source,sh]
----
oc apply -f pipeline_resources/service_account.yaml
----


Test the various build steps:

* Test the S2I Build:
+
[source,sh]
----
oc create -f taskrun_test_1_s2i_build.yaml
oc logs <pod> -c build-step-build
oc logs <pod> -c build-step-push
----

* Test the Image Tag Step
+
[source,sh]
----
oc create -f taskrun_test_2_tag_image.yaml
oc logs <pod> -c build-step-oc
----

* Test the Setting Image Step
+
[source,sh]
----
oc create -f taskrun_test_3_set_image.yaml
oc logs <pod> -c build-step-oc
----

* Test the application deploy Step
+
[source,sh]
----
oc create -f taskrun_test_4_deploy_dc.yaml
oc logs <pod> -c build-step-oc
----

* Test the Skopeo Step
+
[source,sh]
----
oc create -f taskrun_test_5_deploy_dc.yaml
oc logs <pod> -c build-step-oc
----


In the Dev Project create the pipeline resources
* Git:
+
[source,sh]
----
oc create -f resource_rhte_git.yaml
----

* Dev Image (replace GUID):
+
[source,sh]
----
oc create -f resource_rhte_dev_image.yaml
----

Create Pipeline:
+
[source,sh]
----
oc create -f pipeline_rhte.yaml
----

Create the PipelineRun
+
[source,sh]
----
oc create -f pipelinerun_rhte.yaml
----
